{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ICT03_01\\\\Documents\\\\FinalProject\\\\front\\\\src\\\\views\\\\chat\\\\Chatting.js\",\n  _s = $RefreshSig$();\nimport * as React from 'react';\nimport { Container, Grid, Card, CardContent, Box, Table, TableRow, TableCell, Button } from '@mui/material';\nimport Skeleton from '@mui/material/Skeleton';\nimport Stack from '@mui/material/Stack';\nimport { Link, useNavigate } from 'react-router-dom';\nimport socket from './server';\nimport { useEffect } from 'react';\nimport \"./Chatting.css\";\nimport InputField from './components/InputField/InputField';\nimport MessageContainer from './components/MessageContainer/MessageContainer';\nimport RoomList from './components/RoomList/RoomList';\nimport { useContext } from 'react';\nimport RoomListContext from './contexts/RoomListContext';\nimport axios from 'axios';\nimport NavBar from './components/NavBar/NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Chatting = ({\n  props,\n  user\n}) => {\n  _s();\n  const navigate = useNavigate();\n  const value = useContext(RoomListContext);\n\n  // 메세지입력 창\n  const [message, setMessage] = React.useState(\"\");\n\n  // 메세지의 내용이 추가될 때마다 채팅 방의 스크롤을 제일 밑에쪽을 가리키게 함\n  const messageContainerRef = React.useRef(null);\n  const [reverseLayout, setReverseLayout] = React.useState(false);\n\n  // 전체 메세지 저장\n  const [messageList, setMessageList] = React.useState([]);\n\n  // 처음에 한번 동작하는 훅\n  useEffect(() => {\n    // 접속했던 session id 가져오기\n    // axios.get('http://localhost:5001/getSession', { withCredentials: true })\n    // .then((response) => {\n    //     console.log('Session get', response);\n    // })\n    // .catch(error => {\n    //     console.error('Error getting session', error);\n    // });\n\n    // 서버가 모든 클라이언트에게 보내는 메세지 확인\n    let i = 0;\n    socket.on(\"message\", message => {\n      i++;\n      console.log(i);\n      console.log(\"메세지 \", message);\n      // 전체 메세지 저장\n      setMessageList(prevState => prevState.concat(message));\n    });\n  }, []);\n\n  // 유저 정보 업데이트\n  // useEffect(() => {\n  // }, [value.state.user]);\n\n  // 메세지리스트가 변화가 생길 때 스크롤을 이동시킴\n  useEffect(() => {\n    const container = messageContainerRef.current;\n    if (container && reverseLayout) {\n      container.scrollTop = container.scrollHeight;\n    }\n  }, [messageList, reverseLayout]);\n\n  // 메세지입력 함수\n  const sendMessage = event => {\n    event.preventDefault();\n    socket.emit(\"sendMessage\", message, value.state.user, res => {\n      if (res !== null && res !== void 0 && res.ok) {\n        setMessage(\"\");\n      }\n    });\n  };\n  if (value.state.user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        margin: \"50px auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-5 col-md-12 card cardCustom\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row roomContainer\",\n            children: /*#__PURE__*/_jsxDEV(RoomList, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-lg-7 col-md-12 card cardCustom\",\n          children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row chatContainer\",\n            style: {\n              paddingBottom: 50\n            },\n            children: /*#__PURE__*/_jsxDEV(MessageContainer, {\n              messageList: messageList,\n              user: value.state.user\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row\",\n            style: {\n              width: \"100%\"\n            },\n            children: /*#__PURE__*/_jsxDEV(InputField, {\n              message: message,\n              setMessage: setMessage,\n              sendMessage: sendMessage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 96,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 13\n    }, this);\n  } else {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      style: {\n        margin: \"50px auto\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-5 card\",\n          children: /*#__PURE__*/_jsxDEV(RoomList, {\n            rooms: value.state.rooms\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }, this);\n  }\n};\n_s(Chatting, \"6Yew6Zkd+owOXkj5M2z5sc5OWSA=\", false, function () {\n  return [useNavigate];\n});\n_c = Chatting;\nexport default Chatting;\nvar _c;\n$RefreshReg$(_c, \"Chatting\");","map":{"version":3,"names":["React","Container","Grid","Card","CardContent","Box","Table","TableRow","TableCell","Button","Skeleton","Stack","Link","useNavigate","socket","useEffect","InputField","MessageContainer","RoomList","useContext","RoomListContext","axios","NavBar","jsxDEV","_jsxDEV","Chatting","props","user","_s","navigate","value","message","setMessage","useState","messageContainerRef","useRef","reverseLayout","setReverseLayout","messageList","setMessageList","i","on","console","log","prevState","concat","container","current","scrollTop","scrollHeight","sendMessage","event","preventDefault","emit","state","res","ok","className","style","margin","children","fileName","_jsxFileName","lineNumber","columnNumber","paddingBottom","width","rooms","_c","$RefreshReg$"],"sources":["C:/Users/ICT03_01/Documents/FinalProject/front/src/views/chat/Chatting.js"],"sourcesContent":["import * as React from 'react';\r\nimport { Container, Grid, Card, CardContent, Box, Table, TableRow, TableCell, Button } from '@mui/material';\r\nimport Skeleton from '@mui/material/Skeleton';\r\nimport Stack from '@mui/material/Stack';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport socket from './server';\r\nimport { useEffect } from 'react';\r\nimport \"./Chatting.css\";\r\nimport InputField from './components/InputField/InputField';\r\nimport MessageContainer from './components/MessageContainer/MessageContainer';\r\nimport RoomList from './components/RoomList/RoomList';\r\nimport { useContext } from 'react';\r\nimport RoomListContext from './contexts/RoomListContext';\r\nimport axios from 'axios';\r\nimport NavBar from './components/NavBar/NavBar';\r\n\r\nconst Chatting = ({ props, user }) => {\r\n    const navigate = useNavigate();\r\n    const value = useContext(RoomListContext);\r\n\r\n    // 메세지입력 창\r\n    const [message, setMessage] = React.useState(\"\");\r\n\r\n    // 메세지의 내용이 추가될 때마다 채팅 방의 스크롤을 제일 밑에쪽을 가리키게 함\r\n    const messageContainerRef = React.useRef(null);\r\n    const [reverseLayout, setReverseLayout] = React.useState(false);\r\n\r\n    // 전체 메세지 저장\r\n    const [messageList, setMessageList] = React.useState([]);\r\n\r\n    // 처음에 한번 동작하는 훅\r\n    useEffect(() => {\r\n        // 접속했던 session id 가져오기\r\n        // axios.get('http://localhost:5001/getSession', { withCredentials: true })\r\n        // .then((response) => {\r\n        //     console.log('Session get', response);\r\n        // })\r\n        // .catch(error => {\r\n        //     console.error('Error getting session', error);\r\n        // });\r\n        \r\n\r\n        // 서버가 모든 클라이언트에게 보내는 메세지 확인\r\n        let i = 0;\r\n        socket.on(\"message\", (message) => {\r\n            i++;\r\n            console.log(i);\r\n            console.log(\"메세지 \", message);\r\n            // 전체 메세지 저장\r\n            setMessageList((prevState) => prevState.concat(message));\r\n        });\r\n\r\n    }, []);\r\n\r\n    // 유저 정보 업데이트\r\n    // useEffect(() => {\r\n    // }, [value.state.user]);\r\n\r\n    // 메세지리스트가 변화가 생길 때 스크롤을 이동시킴\r\n    useEffect(() => {\r\n        const container = messageContainerRef.current;\r\n        if (container && reverseLayout) {\r\n            container.scrollTop = container.scrollHeight;\r\n        }\r\n    }, [messageList, reverseLayout]);\r\n\r\n    // 메세지입력 함수\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n        socket.emit(\"sendMessage\", message, value.state.user, (res) => {\r\n            if (res?.ok) {\r\n                setMessage(\"\");\r\n            }\r\n        });\r\n    }\r\n\r\n    if (value.state.user) {\r\n        return (\r\n            <div className=\"container\" style={{ margin: \"50px auto\" }}>\r\n                <div className=\"row\">\r\n\r\n                    <div className=\"col-lg-5 col-md-12 card cardCustom\">\r\n                        {/* <h5><Link onClick={chatRoomJoin}>더리치 포트폴리오 토론방 7389</Link></h5>\r\n                                    <h6>올해는 작년보다 더 좋을듯 ' 방금 전</h6> */}\r\n                        <div className='row roomContainer'>\r\n                            <RoomList />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"col-lg-7 col-md-12 card cardCustom\">\r\n                        <NavBar />\r\n                        <div className='row chatContainer' style={{ paddingBottom: 50 }}>\r\n                            <MessageContainer messageList={messageList} user={value.state.user} />\r\n                        </div>\r\n                        <div className='row' style={{ width: \"100%\" }}>\r\n                            <InputField message={message} setMessage={setMessage} sendMessage={sendMessage} />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div className=\"container\" style={{ margin: \"50px auto\" }}>\r\n                <div className=\"row\">\r\n\r\n                    <div className=\"col-5 card\">\r\n                        {/* <div className='w-auto h-auto p-3'>\r\n                                    <h5><Link onClick={chatRoomJoin}>더리치 포트폴리오 토론방 7389</Link></h5>\r\n                                    <h6>올해는 작년보다 더 좋을듯 ' 방금 전</h6>\r\n                                </div> */}\r\n                        <RoomList rooms={value.state.rooms} />\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default Chatting;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}